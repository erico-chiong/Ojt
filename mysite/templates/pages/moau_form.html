{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create SO Form</title>
    <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-200 min-h-screen flex flex-col items-center justify-center">
    <div class="w-full flex flex-row items-center justify-center bg-gray-200 space-x-6 px-10">
        <div class="w-3/5 h-screen bg-white rounded shadow p-8 my-10">
            <div class="flex items-center justify-center w-full h-4/5">
                <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600">
                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                        <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                        </svg>
                        <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload or take a photo</span> or drag and drop</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">SVG, PNG, JPG or GIF (MAX. 800x400px)</p>
                    </div>
                    <!-- Accept images and allow camera capture -->
                    <input id="dropzone-file" type="file" accept="image/*" capture="environment" class="hidden" name="photo" />
                </label>
            </div> 
            <!-- Add this button below the label -->
            <div class="flex justify-center mt-10">
                <button type="button" onclick="document.getElementById('dropzone-file').click()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 focus:outline-none">
                    Take Photo
                </button>
            </div>
        </div>
        
         <div class="w-2/5 h-full space-y-2">
            <div class="w-full h-auto bg-white rounded shadow py-4 px-8">
                <h1 class="text-xl font-bold mb-3 text-center">Save Document</h1>
               <form method="post" enctype="multipart/form-data" class="space-y-4">
                    {% csrf_token %}
                    <div>
                        <label class="block mb-1 font-semibold text-sm">MOAU No:</label>
                        <input type="number" name="moau_no" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block mb-1 font-semibold text-sm">Title:</label>
                        <input type="text" name="title" maxlength="255" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block mb-1 font-semibold text-sm">Approved Date:</label>
                        <input type="date" name="approved_date" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block mb-1 font-semibold text-sm">Objective:</label>
                        <textarea name="objective" rows="3" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    <div>
                        <label class="block mb-1 font-semibold text-sm">Notarized By:</label>
                        <input type="text" name="notarized_by" maxlength="255" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block mb-1 font-semibold text-sm">Notarized Date:</label>
                        <input type="date" name="notarized_date" required class="w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="space-y-1">
                        <!-- Modal Trigger Button for Party -->
                    <button type="button" onclick="openModal()" class="w-full h-8 mt-2 bg-green-500 text-white py-1 rounded hover:bg-green-700 text-sm">Add Party</button>

                    <!-- Modal Structure for Party -->
                    <div id="partyModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
                      <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative">
                        <button type="button" onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl">&times;</button>
                        <h2 class="text-lg font-bold mb-2 text-center">Add MOAU Party</h2>
                        <div class="space-y-2">
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">MOAU No:</label>
                            <input type="number" name="modal_moau_no" required class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Agency:</label>
                            <input type="text" name="agency" maxlength="255" required class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Represented By:</label>
                            <input type="text" name="represented_by" maxlength="100" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Position:</label>
                            <input type="text" name="position" maxlength="50" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Address:</label>
                            <input type="text" name="address" maxlength="255" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Referred To As:</label>
                            <input type="text" name="referred_to_as" maxlength="100" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <button type="button" onclick="closeModal()" class="w-full h-7 bg-green-600 text-white py-1 rounded hover:bg-green-700 text-xs mt-1">Add Party</button>
                        </div>
                      </div>
                    </div>

                    <!-- Modal Trigger Button for Signatory -->
                    <button type="button" onclick="openSignModal()" class="w-full h-8 mt-2 bg-green-500 text-white py-1 rounded hover:bg-green-700 text-sm">Add Signatory</button>

                    <!-- Modal Structure for Signatory -->
                    <div id="signModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
                      <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative">
                        <button type="button" onclick="closeSignModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl">&times;</button>
                        <h2 class="text-lg font-bold mb-2 text-center">Add MOAU Signatory</h2>
                        <div class="space-y-2">
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">MOAU No:</label>
                            <input type="number" name="modal_sign_moau_no" required class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Signed By:</label>
                            <input type="text" name="signed_by" maxlength="255" required class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Position:</label>
                            <input type="text" name="position" maxlength="100" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <div>
                            <label class="block mb-0.5 font-semibold text-xs">Date Signed:</label>
                            <input type="date" name="date_signed" class="w-full border border-gray-300 rounded px-1 py-0.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500">
                          </div>
                          <button type="button" onclick="closeSignModal()" class="w-full h-7 bg-green-600 text-white py-1 rounded hover:bg-green-700 text-xs mt-1">Add Signatory</button>
                        </div>
                      </div>
                    </div>
                    </div>
                    <div class="flex space-x-2 mb-2">
                        <label class="w-1/2 flex items-center justify-center bg-green-100 rounded py-1">
                            <input type="radio" name="moau_type" value="agreement" class="form-radio text-green-500 h-4 w-4" required>
                            <span class="ml-2 text-green-700 text-sm">For Agreement</span>
                        </label>
                        <label class="w-1/2 flex items-center justify-center bg-blue-100 rounded py-1">
                            <input type="radio" name="moau_type" value="understanding" class="form-radio text-blue-500 h-4 w-4" required>
                            <span class="ml-2 text-blue-700 text-sm">For Understanding</span>
                        </label>
                    </div>
                    <button type="submit" class="w-full h-8 mt-2 bg-green-500 text-white py-1 rounded hover:bg-green-700 text-sm">Save</button>
                </form>
            </div>  
        </div>
    </div>
    <div class="flex flex-row items-center justify-center mt-10 space-x-6">
        <a href="{% url 'home' %}" class="block text-center text-green-600 hover:underline mb-3">Back to Home</a>
        <a href="{% url 'item_list' %}" class="block text-center text-green-600 hover:underline mb-3">Back to List</a>
    </div>

    <script>
function openModal() {
  document.getElementById('partyModal').classList.remove('hidden');
}
function closeModal() {
  document.getElementById('partyModal').classList.add('hidden');
}
function openSignModal() {
  document.getElementById('signModal').classList.remove('hidden');
}
function closeSignModal() {
  document.getElementById('signModal').classList.add('hidden');
}
</script>
</body>
</html>
